# P5.3 - Informe RA3 sobre el despliegue (WildFly contenedor + Gradle)

## Preguntas

### a) Componentes y funcionamiento de los servicios del servidor

1. **Explica qué componentes/servicios intervienen en tu despliegue de P5.2 y qué papel tiene cada uno (como mínimo: contenedor Docker, WildFly, aplicación WAR,puertos 8080/9990 y endpoint REST). Ten en cuenta el punto c) sobre el servidor web frontal.**

2. **Describe el flujo de una petición desde el cliente hasta tu endpoint.**

#### Evidencias

- `docker ps` mostrando el contenedor y los puertos publicados.

![Evidencia](./img/evidencia1.png)

- `docker logs -f wildfly` mostrando el despliegue y el acceso.

![Evidencia](./img/evidencia2.png)

- Respuesta del endpoint (`curl`).

![Evidencia](./img/evidencia3.png)


### b) Archivos principales de configuración y bibliotecas compartidas

1. **Identifica dentro de WildFly (en el contenedor) el/los archivo(s) de configuración principal(es) que gobiernan el servidor y señala.**

	- Donde están.
    - Qué tipo de ajustes podrías tocar ahí para tu despliegue.

2. **Explica qué dependencias de tu proyecto se consideran “provided” porque el servidor ya las incluye, y qué ventaja tiene esto.**


#### Evidencias

- Captura/salida de `docker exec -it wildfly ls .../standalone/configuration`.
- Fragmento del `build.gradle.kts` donde se ve `compileOnly`.


### c) Cooperación con el servidor web (proxy / reverse proxy) y https

1. **Plantea una configuración de reverse proxy para tu despliegue de P5.2 que publique la API bajo una ruta clara (por ejemplo /api/) y no exponga el puerto 9990 hacia fuera.**

2. **Incluye un ejemplo de configuración (fragmento) y explica qué cambia respecto a tu despliegue actual.**

3. **Realiza una configuración de TLS (HTTPS) en el servidor web frontal y explica qué ventajas aporta esto. ¿Cambiaría algo en tu aplicación o en la configuración de WildFly?**

#### Evidencias

- Fragmento de `nginx.conf` o `sites-enabled`.
- Explicación de qué puertos publicarías en Docker y cuáles no.
- Como has configurado TLS (certificados, etc.) y qué ventajas aporta.


### d) Mecanismos de seguridad del servidor de aplicaciones

1. **Indica qué medidas de seguridad aplicaste en P5.2**

2. **Indica qué medidas añadirías para producción (mínimo 4), justificando cada una.**

	- Consola de administración (9990) y credenciales.
    - Exposición de puertos.
    - Gestión de secretos (usuarios/contraseñas).
    - Registro y trazabilidad (logs).

#### Evidencias

- Captura de puertos expuestos.
- Captura de que la consola solo es accesible internamente.
- Ejemplo de política de secretos.


### e) Componentes web del servidor de aplicaciones

1. **Explica ómo se engancha la aplicación REST a WildFly en P5.2:**

	- Qué es el WAR y qué contiene a alto nivel.
    - Qué significa el contexto/ruta base de la app.
    - Qué parte del servidor se encarga de servir la API (contenedor web).

2. **Incluye una URL real de tu práctica y desglósala (host, puerto, contexto, ruta del recurso).**


#### Evidencias

- URLs probadas en navegador/curl.
- Log del servidor mostrando el acceso.


### f) Parámetros necesarios para el despliegue

1. **Enumera y justifica los parámetros que fueron necesarios en tu despliegue de P5.2 (mínimo 5).**

	- Parámetros de docker run (nombre, puertos, etc.).
    - Nombre del WAR y ruta de despliegue.
    - Variables o ajustes del build (Gradle).

2. **Explica qué pasaría si uno de esos parámetros estuviera mal.**

#### Evidencias


### g) Pruebas de funcionamiento y rendimiento

1. **Describe qué pruebas funcionales hiciste en P5.2 y aporta evidencias.**

2. **Ejecuta una prueba de rendimiento básica (elige una: ab (ApacheBench), hey o wrk) e incluye el comando utilizado, el endpoint probado y un breve análisis del resultado (latencia, peticiones/segundo o errores).**

#### Evidencias

- Salida completa de `ab`/`hey`/`wrk` y análisis.
- Logs durante la prueba.

### h) Documentación de administración y recomendaciones

**Redacta una mini-guía de administración para tu despliegue de P5.2 que incluya (Debe ser reproducible para otra persona del equipo.):**

1. Cómo levantar WildFly.
2. Cómo desplegar una nueva versión del WAR.
3. Cómo comprobar el estado (logs y endpoint de prueba).
4. Recomendaciones para evitar errores comunes.


#### Evidencias

- Manual con instrucciones claras y paso a paso, acompañado de: 
- Ficheros Docker: dockerfile y compose. 
- Arquitectura de desplieuge 
- Comandos clave (docker, despliegue, pruebas). 
- URLs de prueba. 
- Acceso a logs y endpoints. 
- Pruebas de funcionamiento. 
- Pruebas de rendimiento. 
- Recomendaciones de seguridad.


### i) Virtualización, nube o contenedores en el despliegue

**Realiza un despliegue haciendo uso de docker compose que auné todo. Servidor web (Nginx) + servidor de aplicaciones (WildFly) + tu aplicación REST.**

Ten en cuenta volúmenes para logs, secretos, healthchecks y reinicio automático, limitación de recursos, redes, etc.

Una mejora adicional, sería separar frontend y backend en contenedores distintos, con comunicación entre ellos, y no exponer el backend directamente al host.

#### Evidencias







